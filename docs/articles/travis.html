<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Working with Travis in R • travis</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Working with Travis in R">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">travis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.11.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/travis.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropenscilabs/travis">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Working with Travis in R</h1>
                        <h4 class="author">Patrick Schratz, Kirill Müller</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropenscilabs/travis/blob/master/vignettes/travis.Rmd"><code>vignettes/travis.Rmd</code></a></small>
      <div class="hidden name"><code>travis.Rmd</code></div>

    </div>

    
    
<div id="function-examples" class="section level2">
<h2 class="hasAnchor">
<a href="#function-examples" class="anchor"></a>Function examples</h2>
<ol style="list-style-type: decimal">
<li>
<p>Create a repository on GitHub (if it’s not there yet)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="../reference/github_create_repo.html">github_create_repo</a></span>()</a></code></pre></div>
</li>
<li>
<p>Show the GitHub repository name</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="../reference/github_info.html">github_repo</a></span>()</a></code></pre></div>
</li>
<li>
<p>Turn on Travis for this repo (syncs from GitHub if necessary!)</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/travis_enable.html">travis_enable</a></span>()</a></code></pre></div>
</li>
<li>
<p>Browse the repo on Travis</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/travis_sync.html">travis_browse</a></span>()</a></code></pre></div>
</li>
<li>
<p>Set up push access for Travis: This creates an SSH key, stores it as encoded encrypted environment variable on Travis, and enables push access for the corresponding public key. GitHub notifies you via e-mail.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/use_travis_deploy.html">use_travis_deploy</a></span>()</a></code></pre></div>
</li>
<li>
<p>Query current state of the repo on Travis.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../reference/travis_get_builds.html">travis_get_builds</a></span>()</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3">A collection of <span class="dv">25</span> Travis CI builds<span class="op">:</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="op">-</span><span class="st"> </span>id<span class="op">:</span><span class="st"> </span><span class="dv">430482536</span>, number<span class="op">:</span><span class="st"> </span><span class="dv">415</span>, state<span class="op">:</span><span class="st"> </span>started, duration<span class="op">:</span><span class="st"> </span><span class="ot">NULL</span>, event_type<span class="op">:</span><span class="st"> </span>pull_request, ...</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="op">-</span><span class="st"> </span>id<span class="op">:</span><span class="st"> </span><span class="dv">430482493</span>, number<span class="op">:</span><span class="st"> </span><span class="dv">414</span>, state<span class="op">:</span><span class="st"> </span>failed, duration<span class="op">:</span><span class="st"> </span><span class="dv">2886</span>, event_type<span class="op">:</span><span class="st"> </span>push, ...</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="op">-</span><span class="st"> </span>id<span class="op">:</span><span class="st"> </span><span class="dv">430453895</span>, number<span class="op">:</span><span class="st"> </span><span class="dv">413</span>, state<span class="op">:</span><span class="st"> </span>failed, duration<span class="op">:</span><span class="st"> </span><span class="dv">3028</span>, event_type<span class="op">:</span><span class="st"> </span>pull_request, ...</a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="op">-</span><span class="st"> </span>id<span class="op">:</span><span class="st"> </span><span class="dv">430453887</span>, number<span class="op">:</span><span class="st"> </span><span class="dv">412</span>, state<span class="op">:</span><span class="st"> </span>failed, duration<span class="op">:</span><span class="st"> </span><span class="dv">3251</span>, event_type<span class="op">:</span><span class="st"> </span>push, ...</a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="op">-</span><span class="st"> </span>id<span class="op">:</span><span class="st"> </span><span class="dv">430442750</span>, number<span class="op">:</span><span class="st"> </span><span class="dv">411</span>, state<span class="op">:</span><span class="st"> </span>failed, duration<span class="op">:</span><span class="st"> </span><span class="dv">2716</span>, event_type<span class="op">:</span><span class="st"> </span>pull_request, ...</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="op">-</span><span class="st"> </span>...</a></code></pre></div>
</li>
<li>
<p>Retrieve cache information</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="../reference/travis_get_caches.html">travis_get_caches</a></span>()</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"></a>
<a class="sourceLine" id="cb7-3" data-line-number="3">A collection of <span class="dv">56</span> Travis CI caches<span class="op">:</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="op">-</span><span class="st"> </span>repository_id<span class="op">:</span><span class="st"> </span><span class="dv">10785882</span>, size<span class="op">:</span><span class="st"> </span><span class="dv">68080246</span>, name<span class="op">:</span><span class="st"> </span>cache<span class="op">-</span>linux<span class="op">-</span>trusty<span class="op">-</span>118a1ba90e288592bc83914310d60771d319c6a1e959176fb3aadede7b9782cb<span class="op">--</span>R<span class="dv">-3</span>.<span class="dv">5</span>.<span class="fl">0.</span>tgz, branch<span class="op">:</span><span class="st"> </span>PR<span class="fl">.64</span>, last_modified<span class="op">:</span><span class="st"> </span><span class="dv">2018-09</span><span class="op">-</span>13T22<span class="op">:</span><span class="dv">29</span><span class="op">:</span>55Z, repo<span class="op">:</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="st">`</span><span class="dt">@type</span><span class="st">`</span> =<span class="st"> "repository"</span>, <span class="st">`</span><span class="dt">@href</span><span class="st">`</span> =<span class="st"> "/repo/10785882"</span>, <span class="st">`</span><span class="dt">@representation</span><span class="st">`</span> =<span class="st"> "minimal"</span>, <span class="dt">id =</span> <span class="dv">10785882</span>, <span class="dt">name =</span> <span class="st">"tic"</span>, <span class="dt">slug =</span> <span class="st">"ropenscilabs/tic"</span>)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="op">-</span><span class="st"> </span>repository_id<span class="op">:</span><span class="st"> </span><span class="dv">10785882</span>, size<span class="op">:</span><span class="st"> </span><span class="dv">60603887</span>, name<span class="op">:</span><span class="st"> </span>cache<span class="op">-</span>linux<span class="op">-</span>trusty<span class="op">-</span>e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855<span class="op">--</span>R<span class="dv">-3</span>.<span class="dv">1</span>.<span class="fl">3.</span>tgz, branch<span class="op">:</span><span class="st"> </span>PR<span class="fl">.64</span>, last_modified<span class="op">:</span><span class="st"> </span><span class="dv">2018-09</span><span class="op">-</span>13T22<span class="op">:</span><span class="dv">27</span><span class="op">:</span>07Z, repo<span class="op">:</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="st">`</span><span class="dt">@type</span><span class="st">`</span> =<span class="st"> "repository"</span>, <span class="st">`</span><span class="dt">@href</span><span class="st">`</span> =<span class="st"> "/repo/10785882"</span>, <span class="st">`</span><span class="dt">@representation</span><span class="st">`</span> =<span class="st"> "minimal"</span>, <span class="dt">id =</span> <span class="dv">10785882</span>, <span class="dt">name =</span> <span class="st">"tic"</span>, <span class="dt">slug =</span> <span class="st">"ropenscilabs/tic"</span>)</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">[...]</a></code></pre></div>
</li>
<li>
<p>Clear all caches (caution, currently its only possible to delete all caches!):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/travis_get_caches.html">travis_delete_caches</a></span>()</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"></a>
<a class="sourceLine" id="cb8-3" data-line-number="3">Finished deleting caches <span class="cf">for</span> <span class="op">&lt;</span>repo<span class="op">&gt;</span><span class="st"> </span>on Travis CI.</a></code></pre></div>
</li>
<li>
<p>Create a Personal Access Token (PAT) to avoid Github’s rate limit</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/travis_set_pat.html">travis_set_pat</a></span>()</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"></a>
<a class="sourceLine" id="cb9-3" data-line-number="3">Create a personal access token, make sure that you are signed <span class="cf">in</span> as the correct user. The suggested description <span class="st">'travis+tic for &lt;repo&gt;'</span> has been copied to the clipboard. If you use this token only to avoid GitHubts rate limit, you can leave all scopes unchecked. Then, copy the new token to the clipboard, it will be detected and applied automatically. Please visit https<span class="op">:</span><span class="er">//</span>github.com<span class="op">/</span>settings<span class="op">/</span>tokens<span class="op">/</span>new. A browser window will be opened. Waiting <span class="cf">for</span> PAT to appear on the clipboard. Detected PAT, clearing clipboard. Finished adding private environment variable GITHUB_PAT to <span class="op">&lt;</span>repo<span class="op">&gt;</span><span class="st"> </span>on Travis CI.</a></code></pre></div>
</li>
<li>
<p>Set or update environment variables on Travis. Caution: The secret value passed to this function is captured in the history.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="../reference/travis_get_vars.html">travis_set_var</a></span>()</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3">Finished adding private environment variable variable to <span class="op">&lt;</span>repo<span class="op">&gt;</span><span class="st"> </span>on Travis CI.</a></code></pre></div>
</li>
</ol>
</div>
<div id="relation-to-tic-and-usethis" class="section level2">
<h2 class="hasAnchor">
<a href="#relation-to-tic-and-usethis" class="anchor"></a>Relation to <em>tic</em> and <em>usethis</em>
</h2>
<p>Maybe we can link to the respective vignette in <em>tic</em>?</p>
</div>
<div id="retrieving-and-examining-logs" class="section level2">
<h2 class="hasAnchor">
<a href="#retrieving-and-examining-logs" class="anchor"></a>Retrieving and examining logs</h2>
<p>Extra section for this important task.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#function-examples">Function examples</a></li>
      <li><a href="#relation-to-tic-and-usethis">Relation to <em>tic</em> and <em>usethis</em></a></li>
      <li><a href="#retrieving-and-examining-logs">Retrieving and examining logs</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://krlmlr.info">Kirill Müller</a>, Mika Braginsky, Karthik Ram, Jeroen Ooms, rOpenSci.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
